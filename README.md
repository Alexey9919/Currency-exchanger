Сервис обмена валюты.
Данное приложение эмулирует систему обмена валюты банка с использованием счетов и оповещений клиента. 



Основные требования, которые предъявлялись к сервису: 
Функциональные: 
-	Котировки валюты в режиме реального времени
-	Создание и пополнение счета	
-	Функция обмена валюты переводом между счетами
-	История всех операций со счетами
-	Оповещение пользователей через Telegram-бота
-	Разграничение доступа по счетам

Нефункциональные: 
- Возможность горизонтального масштабирования отдельных модулей
- Мониторинг и журналирование приложения



Стек проекта: 
Java, Spring Framework (Web, Boot, Data, Cloud), PostgreSQL, OAuth 2.0, Docker, Apache Kafka, Flyway, Google Guava Cache, Telegram API, ELK, Zipkin, Grafana.



Блок схема: 


![Image alt](https://github.com/Alexey9919/Currency-exchanger/blob/master/scheme.jpg)

Описание микросервисов:
1)	Сервис котировок валюты. 
Данный сервис принимает SOAP сообщения от Центрального банка России преобразует их в объекты, кэширует и возвращает пользователю по запросу текущий курс валют.

2)	Сервис процессинга.
Сервис хранит счета и проводит с ними операции. При переводе средств с одного счета на другой запрашивает текущий курс валют у сервиса котировок и исходя из полученных данных проводит операцию. Выступает поставщиком для kafka-топика.

3)	Service Discovery
Обнаружение регистрации сервисов.

4)	Service Gateway
Маршрутизация запросов между сервисами, балансировка нагрузки между несколькими экземплярами сервиса котировок. 

5)	Модуль аутентификации и авторизации.
Cервис аутентификации и авторизации использует модуль Spring Cloud Security в качестве основы. Для реализации авторизации в многоузловой среде используется протокол OAuth2.

6)	History-service
Сервис для хранения истории операций по счетам. Выступает как потребитель событий (вычитывает из kafka-топика).

7)	Notification-service
Сервис оповещения пользователя. Выступает как потребитель событий (вычитывает из kafka-топика). Взаимодействуем с telegram-api. Пользователь может авторизоваться через телеграм-бота и получать уведомления об операциях по своим счетам.


Эксплуатация микросервисов:
-	Журналирование микросервисов и агрегирование логов (ELK).
-	Распределенная трассировка (Zipkin).
-	Метрики. Онлайн мониторинг микросервисов (Prometheus, Grafana).

Все сервисы работают в docker для запуска можно использовать docker-compose.



Оповещение пользователя в телеграм: 

![Image alt](https://github.com/Alexey9919/Currency-exchanger/blob/master/tg.jpg)


Мониторинг в Grafana одного из сервисов: 

![Image alt](https://github.com/Alexey9919/Currency-exchanger/blob/master/processing.jpg)


Мониторинг распределения нагрузки на currency-service-1 и currency-service-2:

![Image alt](https://github.com/Alexey9919/Currency-exchanger/blob/master/currency-service.jpg)


Связаться с автором проекта можно в telegram (@alex4718).

